# 4.1 í´ë˜ìŠ¤ ê³„ì¸µ ì •ì˜ğŸ§±

## 4.1.1 ì½”í‹€ë¦° ì¸í„°í˜ì´ìŠ¤
> ê³µì‹ ë¬¸ì„œ [LinkğŸ“](https://kotlinlang.org/docs/interfaces.html)

- Kotlinì˜ ì¸í„°í˜ì´ìŠ¤ëŠ” `interface` í‚¤ì›Œë“œë¡œ ì •ì˜ë¨
``` kotlin
interface MyInterface {
    fun bar()
    fun foo() {
      // optional body
    }
}
```
---

- ì½œë¡ (:)ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ê°€ëŠ¥
- Javaì™€ ë‹¤ë¥´ê²Œ `override` ë³€ê²½ìë¥¼ ê¼­ ì‚¬ìš©í•´ì•¼ í•¨
- ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒ ë©”ì†Œë“œ ì„ ì–¸ë¿ë§Œ ì•„ë‹ˆë¼ **ë©”ì†Œë“œ êµ¬í˜„**ë„ ê°€ëŠ¥
	- Java 8ì˜ `Default Method`ì™€ ìœ ì‚¬ 
	- `default` í‚¤ì›Œë“œë¥¼ ë¶™ì´ì§€ ì•Šì•„ë„ ë¨

```kotlin
interface Clickable {
    fun click()
    fun showOff() = println("I'm clickable") //ë””í´íŠ¸ êµ¬í˜„ì´ ìˆëŠ” ë©”ì†Œë“œ
}

class Button : Clickable {
    override fun click() = println("I was clicked")
}
```
---

- ì¶”ìƒ í´ë˜ìŠ¤ì™€ ë‹¤ë¥¸ ì ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ëŠ” state(ìƒíƒœ)ë¥¼ ìœ ì§€í•  ìˆ˜ ì—†ë‹¤ (<- fieldë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ê¸° ë•Œë¬¸)
- í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆì§€ë§Œ **ì¶”ìƒì **ì´ì–´ì•¼ í•˜ê±°ë‚˜ **ì ‘ê·¼ì êµ¬í˜„**ì´ í•„ìš”
```kotlin
interface MyInterface {
    val prop: Int // abstract

    val propertyWithImplementation: String
        get() = "foo"

    fun foo() {
        print(prop)
    }
}

class Child : MyInterface {
    override val prop: Int = 29
}
```
---
### ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ ìƒì†
- ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ë™ì¼í•œ ë©”ì†Œë“œì— ëŒ€í•´ **ë‘˜ ì´ìƒì˜ ë””í´íŠ¸ êµ¬í˜„**ì´ ìˆëŠ” ê²½ìš° ì•„ë˜ Button í´ë˜ìŠ¤ì˜ `showOff()`ì²˜ëŸ¼ overrideë¥¼ í†µí•´ êµ¬í˜„í•´ì•¼ í•¨

```kotlin
interface Clickable {
  fun showOff() = println("I'm clikable!") //ë””í´íŠ¸ êµ¬í˜„
}

interface Focusable {
  fun showOff() = println("I'm focusable!") //ë””í´íŠ¸ êµ¬í˜„
}

class Button : Clickable, Focusable {
    override fun click() = println("I was clicked")
	
    override fun showOff() {
        super<Clickable>.showOff()
        super<Focusable>.showOff()
    }
}

```


## 4.1.2 open, final, abstract ë³€ê²½ì

- Javaì—ì„œëŠ” `final` í‚¤ì›Œë“œë¥¼ í†µí•´ í´ë˜ìŠ¤ì˜ ìƒì†ì„ ëª…ì‹œì ìœ¼ë¡œ ê¸ˆì§€í•¨
- ì½”í‹€ë¦°ì˜ í´ë˜ìŠ¤ì™€ ë©”ì†Œë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **`final`**
	- ì´ìœ  : ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤ ë¬¸ì œë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ì„œ
	- ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤ ë¬¸ì œ(Fragile Base Class Problem) : ìƒì†ì€ ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ê²°í•©ë„ë¥¼ ë†’ì¸ë‹¤. ë¶€ëª¨ê°€ ë°”ë€Œë©´ ìì‹ë„ ì˜í–¥ì„ ë°›ê²Œ ë˜ëŠ” í˜„ìƒ
- `open` ë³€ê²½ìë¥¼ í†µí•´ì„œ í´ë˜ìŠ¤, ë©”ì†Œë“œë¥¼ ìƒì†ë°›ê²Œ í•  ìˆ˜ ìˆìŒâ—â•
- ì¸í„°í˜ì´ìŠ¤ : ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ë©”ì†Œë“œ, í”„ë¡œí¼í‹°ê°€ `open`

```kotlin
open class RichButton : Clickable { // ì´ í´ë˜ìŠ¤ëŠ” ì—´ë ¤ìˆìŒ
    fun disable() {}    // ì´ í•¨ìˆ˜ëŠ” final => í•˜ìœ„ì—ì„œ ì˜¤ë²„ë¼ì´ë“œâŒ
    open fun animate() {}   // ì´ í•¨ìˆ˜ëŠ” open => í•˜ìœ„ì—ì„œ ì˜¤ë²„ë¼ì´ë“œâ­•
    override fun click() {} // ì´ í•¨ìˆ˜ëŠ” (ìƒìœ„ í´ë˜ìŠ¤ì—ì„œ ì„ ì–¸ëœ) ì—´ë ¤ìˆëŠ” ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•¨ => í•˜ìœ„ì—ì„œ ì˜¤ë²„ë¼ì´ë“œâ­•
    final override fun click() {} //finalë¡œ ê¸ˆì§€ => í•˜ìœ„ì—ì„œ ì˜¤ë²„ë¼ì´ë“œâŒ
}
```
- ì¶”ìƒ ë©”ì†Œë“œëŠ” í•­ìƒ `open`
- ì¶”ìƒ í´ë˜ìŠ¤ì— ì†í•˜ë”ë¼ë„ ë¹„ì¶”ìƒ í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `final`
	- `open`ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œë¥¼ í—ˆìš© ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ë„ ìˆìŒ

```kotlin
abstract class Animated {
    abstract fun animate()
    open fun stopAnimating() {} // openìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ í—ˆìš©
    fun animateTwice() {} // ê¸°ë³¸ì ìœ¼ë¡œ finalì´ë¯€ë¡œ ì˜¤ë²„ë¼ì´ë“œ ë¶ˆê°€
}
```

## 4.1.3 ê°€ì‹œì„± ë³€ê²½ì
- ë””í´íŠ¸ëŠ” **`Public`**
- ìë°”ì™€ ë‹¤ë¥¸ ì 
	- `internal`ì´ë¼ëŠ” ë³€ê²½ìê°€ ì¶”ê°€ë¨
	- ìë°”ì˜ ë””í´íŠ¸ ë³€ê²½ìì¸ `package-private`ì´ ì—†ìŒ


| ë³€ê²½ì |      í´ë˜ìŠ¤ ë©¤ë²„       |      ìµœìƒìœ„ ì„ ì–¸       |
|:------:|:----------------------:|:----------------------:|
| public | ëª¨ë“  ê³³ì—ì„œ ì‚¬ìš© ê°€ëŠ¥ | ëª¨ë“  ê³³ì—ì„œ ì‚¬ìš© ê°€ëŠ¥ |
|  internal      | ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥   |   ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥     |
|   protected     |   í•˜ìœ„ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ          |    ìµœìƒìœ„ ì„ ì–¸ì— ì ìš© ë¶ˆê°€                |
|  private  |    ê°™ì€ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ        |   ê°™ì€ íŒŒì¼ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ                     |

## 4.1.4 ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ì¤‘ì²©ëœ í´ë˜ìŠ¤
> ê³µì‹ ë¬¸ì„œ [LinkğŸ“](https://kotlinlang.org/docs/nested-classes.html)

- ì½”í‹€ë¦°ë„ í´ë˜ìŠ¤ ì•ˆì— í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìŒ
- ìë°”ì™€ ë‹¤ë¥¸ ì 
	- ì¤‘ì²© í´ë˜ìŠ¤ëŠ” ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠëŠ” í•œ ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ **ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŒ**
- **ì¤‘ì²© í´ë˜ìŠ¤** : ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì €ì¥í•˜ì§€ ì•ŠìŒ
- **ë‚´ë¶€ í´ë˜ìŠ¤** : ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì €ì¥í•¨

| í´ë˜ìŠ¤ B ì•ˆì— ì •ì˜ëœ í´ë˜ìŠ¤ A | ìë°”ì—ì„œëŠ”     | ì½”í‹€ë¦°ì—ì„œëŠ”  |
|:-----------------------------:| -------------- | ------------- |
|          ì¤‘ì²© í´ë˜ìŠ¤          | static class A | class A       |
|          ë‚´ë¶€ í´ë˜ìŠ¤          | class A        | inner class A |


```kotlin=
class Outer { 
	inner class Inner { 
		fun getOuterReference(): Outer = this@Outer //ì™¸ë¶€ ì°¸ì¡° ê°€ëŠ¥
	} 
}
```
### Sealed Class
- `sealed` ë³€ê²½ì
	- ì •ì˜ëœ í•˜ìœ„ í´ë˜ìŠ¤ ì™¸ì— ë‹¤ë¥¸ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê¸°ëŠ¥

```kotlin
sealed class Expr {
    class Num(val value: Int) : Expr()
    class Sum(val left: Expr, val right: Expr) : Expr()
}

fun eval(e: Expr): Int =
    when(e) {
        is Expr.Num -> e.value
        is Expr.Sum -> eval(e.left) + eval(e.right)
        // else ë¶„ê¸° ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šì•„ë„ ë¨â—â•â—â•
    }
```
